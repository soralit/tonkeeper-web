import{a8 as m,b as f,f as x,r as o,ev as g,j as a,aJ as C,B as b,u as h,aw as k}from"./index-z3CvngUh.js";import{u as S}from"./navigate-Kq_QSRRE.js";import{u as j}from"./scanner-cRAQvcU2.js";import{H as E,B as v,A as B}from"./AccountView-SLu2SoXs.js";import"./index-JmPMtE-O.js";import"./v4-OErdnafK.js";import"./TransitionGroup-vxI9EqGQ.js";const _=({sdk:e,boc:r,onClose:c,onSubmit:s})=>{const i=m(),{t:n}=f(),{extension:l}=x();S(e,c);const u=j(null,s),d=o.useMemo(()=>g(i.publicKey,r),[i,r]);return a.jsxs(C,{onSubmit:t=>{t.preventDefault(),t.stopPropagation(),u()},children:[a.jsx(E,{title:n("import_signer"),description:n("signer_scan_tx_description")}),a.jsx(v,{extension:l,margin:!0,children:a.jsx(B,{message:d})}),a.jsx(b,{primary:!0,size:"large",fullWidth:!0,type:"submit",children:n("signer_scan_result")})]})},P=()=>{const e=h(),[r,c]=o.useState(void 0),[s,i]=o.useState(void 0),n=o.useCallback(()=>{c(void 0),i(void 0)},[]),l=o.useCallback(t=>{console.log(t),e.uiEvents.emit("response",{method:"response",id:s,params:t}),n()},[e,s,n]),u=o.useCallback(()=>{s&&e.uiEvents.emit("response",{method:"response",id:s,params:new Error("Cancel auth request")}),n()},[s,e,n]);o.useEffect(()=>{const t=p=>{c(p.params),i(p.id)};return e.uiEvents.on("signer",t),()=>{e.uiEvents.off("signer",t)}},[e]);const d=o.useCallback(()=>{if(!(!r||!s))return a.jsx(_,{sdk:e,boc:r,onClose:u,onSubmit:l})},[e,r,s,u,l]);return a.jsx(k,{isOpen:r!=null&&s!=null,handleClose:u,children:d})};export{_ as SignerContent,P as default};
