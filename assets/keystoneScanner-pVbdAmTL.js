import{d as i}from"./index-JmPMtE-O.js";import{u as f,r as e}from"./index-z3CvngUh.js";const l=(d,a)=>{const s=f(),[t,o]=e.useState(d),n=e.useMemo(()=>new i.URDecoder,[]),r=e.useCallback(()=>{t&&s.uiEvents.emit("scan",{method:"scan",id:t,params:void 0})},[s,t]);return e.useEffect(()=>{r()},[r]),e.useEffect(()=>{const c=u=>{u.id===t&&(n.receivePart(u.params),n.isComplete()?a(n.resultUR()):r())};return s.uiEvents.on("response",c),()=>{s.uiEvents.off("response",c)}},[s,t,a,r]),e.useCallback(()=>{o(Date.now())},[o])};export{l as u};
